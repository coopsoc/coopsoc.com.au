(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{7650:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/merch",function(){return s(6289)}])},5726:function(e,t,s){"use strict";var n=s(5893),i=s(3637),a=s(5773),r=s(5305);t.Z=()=>(0,n.jsx)(i.Z,{className:"container-md",children:(0,n.jsx)(a.Z,{className:"justify-content-center text-center",children:(0,n.jsx)(r.Z,{lg:"10",children:(0,n.jsx)("p",{className:"lead text-muted",children:"Orders are now closed - check back next year for more merch!"})})})})},6289:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var n=s(5893),i=s(7294),a=s(9008),r=s.n(a),c=s(5773),l=s(5305),d=s(3637),o=s(4082),u=s(7168);s(8059);var m=s(1163),h=s(1529),x=s(9755),p=s.n(x),N=s(3529),j=s(7058),f=s(9886),Z=s(3337),g=s(3390),v=s(7955),S=s(8842),w=s(8055),y=s(8824),O=e=>{var t;let{product:s,setCart:a,isInCart:r,findVariantID:l,findAllVariantsOfProduct:u}=e,[m,h]=(0,i.useState)(N.tS.UNKNOWN),[x,O]=(0,i.useState)(!1),[k,U]=(0,i.useState)(N.aZ.UNKNOWN),[C,_]=(0,i.useState)(!1),[b,W]=(0,i.useState)(0),[E,K]=(0,i.useState)(!1),[z,P]=(0,i.useState)(""),[I,M]=(0,i.useState)([]),[A,R]=(0,i.useState)(0),[H,L]=(0,i.useState)(!1),T=()=>{H||R(A===I.length-1?0:A+1)},V=()=>{H||R(0===A?I.length-1:A-1)},q=()=>{let e=l(s.name,m,k);if(!e){m===N.tS.UNKNOWN?P("Please select a colour."):k===N.aZ.UNKNOWN?P("Please select a size."):P("Sorry, looks like your colour and size is not available. Please try another combination.");return}return e},D=()=>{let e=q();if(e){if(0===b){P("Please select a quantity.");return}a(t=>{let s=new Map(t);return s.forEach((t,n)=>{n.split("-")[0]===e.split("-")[0]&&s.delete(n)}),s.set(e,b),s}),P("")}},F=()=>{let e=q();e&&(a(t=>(t.delete(e),t)),W(0),P(""))};return(0,i.useEffect)(()=>{let e=u(s.name).flatMap(e=>e.imageURLs).map(e=>e.replace(".png",".jpg"));console.log(e),M(e.filter((t,s)=>e.indexOf(t)===s))},[]),(0,n.jsxs)(f.Z,{className:"m-3",children:[(0,n.jsxs)(Z.Z,{activeIndex:A,next:T,previous:V,dark:!0,children:[I.map(e=>{var t;let s=e.replace("https%3A//www.coopsoc.com.au","");return(0,n.jsx)(j.Z,{onExiting:()=>L(!0),onExited:()=>L(!1),children:(0,n.jsx)("div",{style:{position:"relative",width:"100%",paddingTop:"100%"},children:(0,n.jsx)(p(),{src:s,alt:null!==(t=s.split("/").at(-1))&&void 0!==t?t:"merch item",layout:"fill",sizes:"(max-width 575px) 100vw, (max-width: 767px) 33vw, 25vw"})})},s.split("/").at(-1))}),(0,n.jsx)(g.Z,{direction:"prev",onClickHandler:V}),(0,n.jsx)(g.Z,{direction:"next",onClickHandler:T})]}),(0,n.jsxs)(d.Z,{className:"p-3",children:[(0,n.jsx)("h3",{children:s.name}),(0,n.jsx)("p",{children:(t=s.price.cents)?new Intl.NumberFormat("en-US",{style:"currency",currency:"AUD"}).format(1*t/100):"Price not available."}),(0,n.jsx)("p",{children:s.description}),(0,n.jsxs)(c.Z,{className:"gap-3 my-2 my-md-3",children:[(0,n.jsxs)(v.Z,{direction:"down",isOpen:x,toggle:()=>O(!x),children:[(0,n.jsx)(S.Z,{caret:!0,children:m===N.tS.UNKNOWN?"Colour":m}),(0,n.jsxs)(w.Z,{children:[m!==N.tS.UNKNOWN&&(0,n.jsx)(y.Z,{onClick:()=>h(N.tS.UNKNOWN),children:"Unselect colour"},N.tS.UNKNOWN),s.colours.map(e=>(0,n.jsx)(y.Z,{onClick:()=>h(e),children:e},e))]})]}),(0,n.jsxs)(v.Z,{direction:"down",isOpen:C,toggle:()=>_(!C),children:[(0,n.jsx)(S.Z,{caret:!0,children:k===N.aZ.UNKNOWN?"Size":k}),(0,n.jsxs)(w.Z,{children:[k!==N.aZ.UNKNOWN&&(0,n.jsx)(y.Z,{onClick:()=>U(N.aZ.UNKNOWN),children:"Unselect size"},N.aZ.UNKNOWN),s.sizes.map(e=>(0,n.jsx)(y.Z,{onClick:()=>U(e),children:e},e))]})]}),(0,n.jsxs)(v.Z,{isOpen:E,toggle:()=>K(!E),children:[(0,n.jsx)(S.Z,{caret:!0,children:0===b?"Qty":b}),(0,n.jsx)(w.Z,{children:[1,2,3,4,5].map(e=>(0,n.jsx)(y.Z,{onClick:()=>W(e),children:e},e))})]})]}),(0,n.jsxs)(c.Z,{className:"p-2 d-flex justify-content-center align-items-center flex-col",children:[(0,n.jsx)(o.Z,{className:"m-1 bg-green",onClick:()=>D(),children:r(s.name)?"Update cart":"Add to cart"}),r(s.name)&&(0,n.jsx)(o.Z,{className:"m-1 bg-warning text-white",onClick:()=>F(),children:"Remove from cart"})]}),z&&(0,n.jsx)(c.Z,{style:{textAlign:"center"},children:(0,n.jsx)("p",{style:{color:"#ba3232"},children:z})})]})]})},k=s(5726),U=e=>{let{repo:t}=e,s=(0,m.useRouter)(),[a,x]=(0,i.useState)(new Map),[p,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("cart");if(null!=e){let t=JSON.parse(e),s=new Map;t.map(e=>{s.set(e.product.id,e.qty)}),x(s)}},[]);let j=(e,s,n)=>{var i;return null===(i=t.variants.find(t=>t.productName.includes(e)&&t.colour===s&&t.size===n))||void 0===i?void 0:i.id},f=e=>t.variants.filter(t=>t.productName.includes(e)),Z=e=>{var s;let n=null===(s=t.variants.find(t=>t.productName.includes(e)))||void 0===s?void 0:s.id;return!!n&&[...a.keys()].some(e=>e.split("-")[0]===n.split("-")[0])},g=()=>{N(!0);let e=[];a.forEach((s,n)=>{let i=t.variants.find(e=>e.id===n);i&&t.products.find(e=>i.productName.includes(e.name))&&e.push({product:{id:i.id,name:i.productName,images:i.imageURLs},price:i.price,qty:s})}),localStorage.setItem("cart",JSON.stringify(e)),N(!1),s.push({pathname:"/cart"})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r(),{children:(0,n.jsx)("title",{children:"Merch | UNSW Co-op Society"})}),(0,n.jsxs)("section",{className:"section section-sm",children:[(0,n.jsx)(c.Z,{className:"justify-content-around text-center",children:(0,n.jsx)(l.Z,{lg:"8",children:(0,n.jsx)("h1",{className:"animate__animated animate__zoomIn animate__fast pb-4 mt-3 mt-sm-5",children:"MERCH"})})}),(0,h.v)()?(0,n.jsxs)(d.Z,{className:"container-md",children:[(0,n.jsx)(c.Z,{className:"justify-content-center",children:t.products.map(e=>(0,n.jsx)(l.Z,{className:"col-sm-5",children:(0,n.jsx)(O,{product:e,setCart:x,isInCart:Z,findVariantID:j,findAllVariantsOfProduct:f})},e.name))}),(0,n.jsx)(c.Z,{className:"mt-3 justify-content-center",children:(0,n.jsxs)(o.Z,{disabled:0===a.size||p,onClick:()=>g(),className:"bg-primary text-white",children:[p&&(0,n.jsx)(u.Z,{size:"sm",children:"Loading..."}),(0,n.jsx)("span",{children:" View Cart"})]})})]}):(0,n.jsx)(k.Z,{})]})]})}}},function(e){e.O(0,[122,463,888,774,179],function(){return e(e.s=7650)}),_N_E=e.O()}]);